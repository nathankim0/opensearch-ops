---
name: analyze-patterns
description: "두 시간대의 로그 패턴을 비교 분석하여 이상 패턴을 탐지합니다. 장애 발생 전후 비교, 배포 전후 비교 등에 사용하세요."
argument-hint: "[비교 대상 설명] [기간1] [기간2]"
---

# 로그 패턴 비교 분석 스킬

두 시간대(baseline vs selection)의 로그 패턴을 비교하여 이상 징후를 탐지합니다.

## 입력

$ARGUMENTS

## 실행 절차

### 1단계: 시간대 설정

사용자 입력에서 두 기간을 추출합니다:

| 구분 | 역할 | 예시 |
|------|------|------|
| **baseline** | 정상 기간 (비교 기준) | 장애 전, 배포 전 |
| **selection** | 분석 대상 기간 | 장애 중, 배포 후 |

기간이 하나만 주어지면:
- selection = 주어진 기간
- baseline = selection 직전 동일 길이

### 2단계: 로그 패턴 분석

**LogPatternAnalysisTool**을 사용:

분석 항목:
1. **새로 등장한 패턴**: selection에만 있는 로그 패턴
2. **사라진 패턴**: baseline에는 있지만 selection에는 없는 패턴
3. **급증 패턴**: 빈도가 크게 증가한 패턴
4. **급감 패턴**: 빈도가 크게 감소한 패턴

### 3단계: 데이터 분포 분석

**DataDistributionTool**을 사용하여 필드별 분포 변화 분석:
- HTTP 상태 코드 분포
- 에러 타입 분포
- 응답 시간 분포
- 서비스/호스트별 분포

### 4단계: 결과 보고

```
## 패턴 비교 분석 결과

### 분석 기간
- Baseline: YYYY-MM-DD HH:MM ~ HH:MM
- Selection: YYYY-MM-DD HH:MM ~ HH:MM

### 이상 탐지 요약
- 신규 에러 패턴: N개
- 급증 패턴: N개
- 총 이상 점수: [높음/중간/낮음]

### 신규 에러 패턴 (selection에만 존재)
1. `[패턴]` - 발생 N회
2. ...

### 급증 패턴 (baseline 대비 증가)
| 패턴 | baseline | selection | 증가율 |
|------|----------|-----------|--------|
| ... | N회 | N회 | +N% |

### 분포 변화
[주요 변화 요약]

### 추정 원인
[패턴 분석 기반 추정]
```
